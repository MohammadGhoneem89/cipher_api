<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title></title>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script lang="javascript">


var ws;


function openSocketAgain(host){
	        host = host.replace('http://','ws://')
		console.log("starting web socket connection");
		ws = new WebSocket( host +'/Socket' );
		ws.onopen= function(event){
		   var gd="test";
		   //gd=guid();
		   var msg = {"username":"alisafri","page":"", "Args" : ""}
                   ws.send(JSON.stringify(msg));
                   obj = document.getElementById("btn");
                   if (obj){ obj.disabled = false;} 
                   obj = document.getElementById("btn1");
                   if (obj){ obj.disabled = false;} 
                }
		ws.onclose = function(event){
		   console.log("web socket connection closed re-establising connection");
                   obj = document.getElementById("btn");
                   if (obj){ obj.disabled = true;} 
		   setTimeout(function() { openSocketAgain(host)}, 10000);
                }
		ws.onmessage = function (event) {
		   console.log("web socket received message from server");
		   console.log(JSON.parse(event.data));
                  
                   
		};
	
}

var host = "http://172.16.0.95:91"
$(document).ready(function () {
       openSocketAgain(host);
       
})

function CHOO(){
  var cnt = document.getElementById("txtCnt").value;
  var startIndex = document.getElementById("txtIndex").value;
  var msg = {"count": cnt, "si" : startIndex, "a": "all"}
  startIndex  = "";
  ws.send (JSON.stringify(msg)); 

}

function CHOO1(){
  var cnt = document.getElementById("txtCnt").value;
  var startIndex = document.getElementById("txtIndex").value;
  var msg = {"count": cnt, "si" : startIndex , "a": "file"}
  startIndex  = "";
  ws.send (JSON.stringify(msg)); 

}
-->


</script>


</head>

<body>
   <div>
      Count <input type="textbox" id="txtCnt" />
      Start Index <input type="textbox" id="txtIndex" />

      <input type="button" value="chain reaction" onclick="CHOO()" id="btn" disabled="true"/>

      <input type="button" value="File based" onclick="CHOO1()" id="btn1" disabled="true"/>

      
            

   </div>
   <textarea id="myarea" rows="40" cols="100">
   </textarea>

</body>



</html>