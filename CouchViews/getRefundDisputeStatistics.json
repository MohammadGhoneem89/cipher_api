{"_id":"_design/getRefundDisputeStatistics","_rev":"2-cebcf1b112721a7a21283739ba7b7525","views":{"getRefundDisputeStatistics":{"reduce":"\r\nfunction (keys, values, rereduce) {\r\n  var reduceObj = {count :0,amount :0.00}\r\n  for(var j=0;j<values.length;j++){\r\n    reduceObj.count += rereduce ? values[j].count : 1;\r\n    reduceObj.amount +=values[j].amount\r\n  }\r\n   return reduceObj;\r\n}\r\n","map":"function (doc) {\r\n\r\n    var json = {\r\n        recordType :\"\",\r\n        disputeCnt : 0,\r\n        refundCnt : 0,\r\n        disputeAmt : 0.00,\r\n        refundAmt  : 0.00\r\n    }\r\n\r\n    if(doc.DocumentName === \"RefundView\"){\r\n        var now = new Date(doc.REFUNDINITTS * 1000);\r\n        var startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n        var timestamp = startOfDay / 1000;\r\n        // please don't change the keys indexes\r\n        var keys = [\r\n            timestamp,\r\n            doc.SPCode,\r\n            doc.ServiceCode,\r\n            doc.PaymentMethod,\r\n            doc.paymentChannel,\r\n            doc.Status,\r\n            doc.EPayStatusAuthRecv\r\n        ];\r\n        json.recordType = \"R\"\r\n        json.refundCnt = 1\r\n        json.refundAmt = doc.TotalBillAmount;\r\n        emit(keys,json);\r\n    }\r\n\r\n    if(doc.DocumentName === \"DisputeView\"){\r\n        var now = new Date(doc.DISPUTEINITTS * 1000);\r\n        var startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n        var timestamp = startOfDay / 1000;\r\n        // please don't change the keys indexes\r\n        var keys = [\r\n            timestamp,\r\n            doc.SPCode,\r\n            doc.ServiceCode,\r\n            doc.PaymentMethod,\r\n            doc.paymentChannel,\r\n            doc.Status,\r\n            doc.EPayStatusAuthRecv\r\n        ];\r\n        json.recordType = \"D\"\r\n        json.disputeCnt = 1\r\n        json.disputeAmt = doc.TotalBillAmount;\r\n        emit(keys,json);\r\n    }\r\n}\r\n"}},"language":"javascript"}