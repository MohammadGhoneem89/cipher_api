{"_id":"_design/transactionSummaryNew","_rev":"3-90b41ce036c371c9dcd0bb1b95ab99ed","views":{"transactionSummary":{"reduce":"\r\nfunction (keys, values, rereduce) {\r\n  var reduceObj = {count :0,amount :0.00}\r\n  for(var j=0;j<values.length;j++){\r\n    reduceObj.count += rereduce ? values[j].count : 1;\r\n    reduceObj.amount +=values[j].amount\r\n  }\r\n   return reduceObj;\r\n}\r\n","map":"function (doc) {\r\n    if(doc.DocumentName === \"ConsolidatedView\"){\r\n        var now = new Date(doc.TimeStamp * 1000);\r\n        var startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n        var timestamp = startOfDay / 1000;\r\n        var status = \"SUCCESS\";\r\n        if(doc.ISRFND){status = \"REFUNDED\";}\r\n        if(doc.ISFAIL){status = \"FAILED\";}\r\n        var value =  {amount: doc.TotalBillAmount,count : 1};\r\n        var keys = [timestamp,doc.SPCode,doc.ServiceCode,status,doc.CardType,doc.PaymentMethod,doc.PaymentGateway,doc.AcquirerId];\r\n        emit(keys,value);\r\n    }\r\n}"},"acquirerYear":{"reduce":"\r\nfunction (keys, values, rereduce) {\r\n  var reduceObj = {count :0,amount :0.00}\r\n  for(var j=0;j<values.length;j++){\r\n    reduceObj.count += rereduce ? values[j].count : 1;\r\n    reduceObj.amount +=values[j].amount\r\n  }\r\n   return reduceObj;\r\n}\r\n","map":"function (doc) {\r\n    if (doc.DocumentName == \"ConsolidatedView\" && doc.TimeStamp >0 && doc.SPCode != \"\") {\r\n        var date = new Date(doc.TimeStamp * 1000);\r\n        var timeStamp = new Date(date.getFullYear(), 0) / 1000;\r\n        emit([timeStamp,doc.AcquirerId], {count :1, amount : doc.TotalBillAmount});\r\n    }\r\n}"}},"language":"javascript"}