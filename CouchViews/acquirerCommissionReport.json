{"_id":"_design/acquirerCommissionReport","_rev":"3-93e00d56d76e01a3ae094c8656711b19","views":{"acquirerCommissionReport":{"map":"function (doc) {\n  \n  var json = {\n       CardType : \"\",\n       PaymentGateway : \"\",\n       CommissionStartDate : 0,\n       CommissionEndDate : 0,\n       CommissionAmount : 0,\n       Status : \"\",\n       InitiatedBy : \"\",\n       ApprovedBy : \"\",\n       TransferDate : 0,\n       TransferStatus  : \"\",\n       Acquirer: \"\"\n  }\n  if (doc.data.DocumentName == \"ConsolidatedView\" \n        && doc.data.CommissionBatchID !=\"\"){\n        var timestamp = doc.data.CommissionBatchID.replace(doc.data.AcquirerId,\"\")\n        var ltimestamp = parseInt(timestamp,10);\n        json.CardType = doc.data.CardType\n        json.PaymentGateway = doc.data.PaymentGateway\n        json.CommissionAmount = doc.data.AcquirerCommissionAmt\n        emit([ltimestamp,doc.data.AcquirerId,doc.data.CommissionBatchID], json);\n  }\n  if (doc.data.DocumentName == \"Commission\" ){\n      json.CommissionStartDate = doc.data.StartDate\n      json.CommissionEndDate = doc.data.EndDate\n      json.Status =  doc.data.Status\n      json.InitiatedBy = doc.data.INITBy\n      json.ApprovedBy = doc.data.APRVBy\n      json.TransferDate =doc.data.DEBTTimestamp\n      json.TransferStatus = doc.data.ISDEBT\n      json.AcquirerId = doc.data.SPCode\n        \n       emit([doc.data.INITTimestamp,doc.data.SPCode,doc.data.CommissionBatchNo], json);\n  }\n  \n  \n}","reduce":"\r\nfunction (keys, values, rereduce) {\r\n  var reduceObj = {count :0,amount :0.00}\r\n  for(var j=0;j<values.length;j++){\r\n    reduceObj.count += rereduce ? values[j].count : 1;\r\n    reduceObj.amount +=values[j].amount\r\n  }\r\n   return reduceObj;\r\n}\r\n"}},"language":"javascript"}