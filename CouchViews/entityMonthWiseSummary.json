{"_id":"_design/entityMonthWiseSummary","_rev":"3-98d4fb3b547650084f66aba7da6f3c28","views":{"entityMonthWiseSummary":{"reduce":"\r\nfunction (keys, values, rereduce) {\r\n  var reduceObj = {count :0,amount :0.00}\r\n  for(var j=0;j<values.length;j++){\r\n    reduceObj.count += rereduce ? values[j].count : 1;\r\n    reduceObj.amount +=values[j].amount\r\n  }\r\n   return reduceObj;\r\n}\r\n","map":"function (doc) {\r\n  \r\n  if(doc.data.DocumentName === \"ConsolidatedView\" && doc.data.SPCode !=\"\"){\r\n    var date = new Date(doc.data.TimeStamp * 1000);\r\n    var startOfMonth = new Date(date.getFullYear(), date.getMonth());\r\n    var timeStamp = startOfMonth / 1000;\r\n    var status = \"SUCCESS\";\r\n    if(doc.data.ISRFND){status = \"REFUNDED\";}\r\n    if(doc.data.ISFAIL){status = \"FAILED\";}\r\n    var value =  {amount: doc.data.TotalBillAmount,count : 1};\r\n    // please don't change the keys indexes\r\n    var keys = [\r\n      timeStamp,\r\n      doc.data.SPCode, \r\n      doc.data.ServiceCode, \r\n      status, \r\n      doc.data.AcquirerId, \r\n      doc.data.PaymentGateway, \r\n      doc.data.PaymentMethod, \r\n      doc.data.CardType,\r\n      doc.data.EPayStatusAuthRecv\r\n      ];\r\n    emit(keys,value);\r\n  }\r\n}"}},"language":"javascript"}